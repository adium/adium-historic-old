$Id: ToDoList.txt,v 1.32 2004/04/10 22:21:14 evands Exp $

Legend
+ Change or Addition
- Removal
* Bug Fix
# Debatable (ASK and debate before doing!)
= Done (Move to the bottom)

If you are working on something big and it may take a while, please tag it with your [name].


-------------------------------------------------------------------------------------------------------
Bugs
-------------------------------------------------------------------------------------------------------
* Don't spawn new windows when we're hidden, doing so will unhide us (Show the windows next time we're unhidden)
* Adium will unhide if hidden (via cmd-H) while a tooltip is visible
* Tooltip code does not like the contact list 'hide while in background' preference.  Lots of issues
* Contact list flippy triangles are white behind them in 10.2 [Colin]
* Shift-command-left does not work as expected, according to http://www.visualdistortion.org/crash/view.jsp?crash=7722
* Is TOC2 hiding somewhere? Check out: http://www.visualdistortion.org/crash/view.jsp?crash=7680
* We aren't processing <code> tags in our HTML decoder (Jabber uses them)
* Is jabber working correctly?  Are we receiving status for buddies upon initially connecting?  Need to check this.
* User icons are still getting flipped.  We need to determine if they're from libgaim or from the address book.
* Changing an alias in the inspector does not correctly update the contact list
* Yahoo giving some users a Gaim error: unknown error 29 on connect
* Some URLs in profiles aren't allowing clicks properly.
* We have a 10.2.8 crash in contact list resize code, somehow: http://www.visualdistortion.org/crash/view.jsp?crash=8008 (There are a couple like this)
-------------------------------------------------------------------------------------------------------
Minor Changes
-------------------------------------------------------------------------------------------------------
Contacts:
	+ Allow specifying an image for a contact in the inspector (Independent of address book)
	+ Add to buddy list menu item, contextual menu item (for strangers)
	+ Add area for typing contact notes to inspector, display notes in tooltip [Brian]

Alerts:
	+ Allow user to have more control over what is spoken by the announcer plugin

Contact List: 
	- Remove contact list font preference.  Hook this up to cmd-T
	- Remove the advanced option for vertical resizing, since this is already covered in the main preferences.
	* Renaming doesn't work at the moment.
	* Alias doesn't stick on quit. This is needed for those services that don't support certain characters.
	
Accounts:
	+ Allow user to cancel connecting of accounts
	+ Auto-complete aliases in log viewer
	+ Add account specific proxy fields (Type, host, port) for all libgaim connections [Evan]
	+ Standardize on the service description for Oscar accounts - do something like "AIM, ICQ, and .Mac" in the services dropdown, in the new message prompt, etc.
	
WebKit Message View:
	+ Add preference to switch active style, preview styles
	+ Add preference to switch variants for the active style
    
Message Window:
	+ Insert/Edit link menu item, accompanying link entry panel, edit link context menu
	+ Open new windows behind the frontmost window (When not opening in tabs) [Colin]
        I don't know quite what to do here. I'd like some guideance. <<< I never got any guidence, dammit! :P
	+ Insert emoticon menu item, contextual menu item
	+ Tab-complete usernames in messages and chat
	
Contact List Display:
	+ Small contact list icon to identify mobile device users
	+ With offline contacts visible, hide the group counting 'visible' value.

Other:
	+ Create a plugin to hide the AIM "Your screen name is now signed in 2 locations" messages
	# Rename all the classes in AIUtilities to have the prefix "AI" so that the framework is uniform.  This framework is designed to be Adium-independent, so we should make it easier to use in this way.
	    Colin: Possibly use a different prefix, such as "AU", and rename the framework AdiumUtilities? The prefix has come to signify ownership/creatorship, so an "unused" prefix would seem more neutral/fair. Maybe I'm just being anal :P
		Evan: Auburn University? I'm with you though if we change it... but I really think it's okay as-is.
        Jeff: Remember that we lose CVS history if we change filenames.

	+ '--insensitive' flag in AIEmoticon (to be placed in the TextEquivalents.txt file) that allows emoticons' text equivalents to be case-insensitive (without applying this nature globally to all emoticons).
		Colin: Didn't Mac-arena do this already?

-------------------------------------------------------------------------------------------------------
Big Stuff
-------------------------------------------------------------------------------------------------------

Contact alerts:
	Improve the contact alerts interface, reducing all editing to one window that is easier to use.
	(Model: http://homepage.mac.com/adamiser/sortathis6.png)

	Steps:
    = Remove alerts preference pane
	= Remove contact menu from alert window
	= Remove event popup from alert window
	= Disallow editing of events
	= Remove event view insertion (on selection)
	= Rework context menus.. change to "Edit Alerts"
	+ Add icons (16x16) to event types, and display them in the event list (still needed on some.  make the ESContactAlert subclasses respond to -icon)
	= Add toolbar to window, add, edit, delete
	= Add sheet for 'add', 'edit'.  Must be independent from alert window.
	= Sheet has event, action, and contact (submenued by group) popups.
	= Add source list on left of all objects with alerts
	= Clicking in source list changes displayed
	+ Menu has "all contacts in ___" items, and "all contacts" item
	= Dynamically load view into sheet depending on selected alert
	+ Redesign views, simplify, use big controls
	= Add "Add alert" context menu - that opens the sheet as a panel and allows easy adding
	+ Add "Contact Alerts" menu item to window menu for opening alert window
	= Auto-fill sheet for new alert based on selection in window on clicking add


Contact list display:
	Add user icon and extended status display support to the contact list, and simplify its
	configuration to a small subset of nice looking cell arrangements.

	Details:
	+ Four components to the contact list:
	 	+ User Name - (Text) Name / Alias
	 	+ User Icon - (Image) AIM Buddy Icon / MSN Avatar / Address book icon
	 	+ Status Badge - (Image) Icon representing status, specified by user
	 	+ Extended Status - (Text) iChat status, away message, MSN state name, MSN user name/status
	+ User can toggle each component (except user name) on/off with view menu items
	+ User can choose whether icons are on left or right.  Status Badge always goes on opposite side
	+ If icons are visible, extended status is displayed below user name, otherwise displayed next to user name
	+ Add option to not display groups on the contact list (Be careful with this and manual ordering)

Status badges:
	- Remove status icons plugin
	+ Add images based status badges to the contact list
	+ Allow user to select icon sets (packaged in a bundle) in preferences
    

Event Info (Implement as a new plugin, to replace bezel):
    	Notify the user of status changes for specific contacts with a small, very visible, easy to position, non intrusive
    	floating 'bezel'

    	Details:
	+ Give the notification window a titlebar, and allow it to be repositioned while visible.
	  I think that making only the titlebar clickable would be neat for unobstrusiveness [Jorge]
	# Stack bezels when multiple events arrive
	  - I am strongly against the clutter of stacks, I vote for queue events [Jorge]
	+ Color the entire bezel to match the event being displayed
	+ Make the bezel smaller, clearer, easier to read, prettier
	+ Give the event info few preferences if any.


Contact Blocking:
    	Allow the user to easily block/unblock users by name, or users on their list.  Provide a way for them to see
    	all blocked names and add/remove from the list.  Ignore the AIM specific block 'modes'.

    	Steps:
	+ Add block and unblock menu items which prompt for the service and name
	+ Add block / unblock contextual menu items
	+ Add "Block contacts not on my list" to AIM account preferences


Contact Inspector:
    	Provide a contact inspector with a lot of room to grow, that is easy to use, organized, and lets the user
    	manage all their contact specific settigns in one place

    	Steps:
    	+ Convert inspector to preference-like window with a toolbar of categories
    	+ Update existing inspector views to use big controls, and place them in the inspector categories
    	+ Move contact info into a category in the inspector


-------------------------------------------------------------------------------------------------------
Areas that require more thought before implementing
-------------------------------------------------------------------------------------------------------
New State System:
    Allow users to create 'states' that describe their activity online.  States would set their status
    across the various protocols and allow them to alert certain behavior in Adium (Window spawning, 
    sounds, alerts, notifications, etc).  The goal is to replace the protocol specific state systems
    (idle & away) with something that better suits a user connected to multiple protocols, and allow
    Adium's behavior to be better customized to a user's diverse 'states' of IM throughout the day.

Multi-user chat:
    Powerful multi-user chat that can handle both large, moderated rooms (irc) and multi-way IMs (MSN).
    
Contact status coloring:
    Status coloring that is easy to configure and consistant throughout Adium.

Meta Contacts:
    Provide a way for users to create and manage their own meta contacts.    

Protocol Specific Functions:
    Provide a menu for service code to insert protocol specific options.  Things such as buddy search,
    password changing, getting info on non-listed users, etc.

File Transfer:
    Non-intrusive prompts, download management, drag & drop transfer, previewing, direct connect,
    progress feedback, etc.
	
Event integration:
    Shift control of sound playing and dock bouncing to the event controller, keeping the existing preferences
    as a front to hidden events in the event system.  To reduce duplicate code and provide better behavior
    for custom sound and bounce settings that would otherwise conflict.

Deferring of initial message:
   Don't pop up a message window if one doesn't already exist.  Use some kind of dock indicator / list indicator.  Double click on list or dock menu item would display the message.  If a window is already open, new messages would create a tab as normal.  We could associate this option with the state system for some pretty cool behavior.


-------------------------------------------------------------------------------------------------------
Unfixable(?) Issues
-------------------------------------------------------------------------------------------------------
* Stop contact list from auto-resizing under the dock
	It does not auto-resize under the dock EXCEPT for at the edges, by design, since many people use a dock which does not extend to the edges of the screen and would like the contact list to reach down there.  So far as I can tell there's no way to know how
 wide the dock is; only how tall it is.

* Don't overwrite user specified icons in the address book.  Only overwrite iChat placed icons (and store ours such that iChat will overwrite them) - (Evan: I spent an hour going through private frameworks trying to figure this out.  If you have any ideas
, please let me know.)

-------------------------------------------------------------------------------------------------------
Waiting On
-------------------------------------------------------------------------------------------------------

-------------------------------------------------------------------------------------------------------
Done
-------------------------------------------------------------------------------------------------------
Bug Fixes:
= Account name not displaying correctly after service switch
= accountXferDestroy in CBGaimAccount appears to be doing.. something.. wrong, causing a lot of file transfer crashes.
= 'Auto-Away' controls do not dim when there are no away messages (configureControlDimming overrides savedAwaysMenu)
= 'Auto-Away' menu dimming does not refresh when away messages are changed
= 'Auto-Away' menu does not refresh when away messages are changed
= Auto-Idle does not remove when 'Auto-Away' is turned on (Set them both to 1 minute, wait, click 'return', idle stays)
= Contact alerts window is still registering for a notification when the account changed, but not implementing an action method.
= Contact list display format preference not applying correctly on launch
= Deleting a "new account" doesn't display <New Account> as the name in  the resulting confirmation dialogue
= Deleting the default theme makes the prefs crash on subsequent loads.
= If preferences are selected to advanced on close, the window will be vertically small on re-open.
= In certain fonts, the tails of letters will stain in the text entry field after it clears.  This is visible with HoeflerText(size 12) - type a few j's and then press esc to clear the field. (hehe)
= Libgaim disconnect errors are being displayed, and not ignored (since they are handled internally)
= Message tabs are not refreshing correctly when status changes (Fixed?)
= Mousekeys to move tabs causes a crash: http://www.visualdistortion.org/crash/view.jsp?crash=5930
= Preference window crashes if you have a color picker open, close the window, and then click inside the picker.  The colorwell just needs to be told activate:NO in viewWillClose.  Fixing this requires verifying that viewWillClose is being called on advan
= Prevent cmd-delete from working in the message window
= Pushing escape clears the text field, instead of allowing you to convert from kanji to roman. This can be considered a bug, but some people like the escape key to be used to clear the text field too, so maybe this could be a preference or something.
	Evan: I say we just take this nonstandard 'feature' out.
	Colin: It's not nonstandard and it's a good feature.
	Evan: Okay, okay, popular response has been that they love it.  We'll think about a revised Keybaord preferences, perhaps in the Sending tab, to encapsulate this and maybe other preferences?
= Spaces in the address book STILL don't work properly, and they really should be better now. Grr.
= Stray tab divider is displaying when dragging tabs
= Version checker reports 'up to date' when there is no net connection (and when the server cannot be reached?)
= When dragging a tab off quickly, it is possible for the tab bar to not finish moving to the correct position or to crash.
= Window content is drawing 2 pixels to the left when dragging tabs
ced preference panes.


Features & Changes:
= Add /music script that shows "Hip-hoppin' to __ by DJ __ on my GhettoBlasta"
= Add a 'None' soundset 
= Add checkboxes in source list to enable/disable packs
= Add dividers to view menu
= Add Offline status coloring
= Add support for displaying emoticon images (webkit message view)
= Add support for the scrolling / paging keys in the WebKit View
= Auto-complete aliases in New Message prompt
= Change window cycling menu items to 'Previous Chat' 'Next Chat'
= Clean up emoticon preference layout.  Move checkbox next to pack name, align icons, adjust padding, etc.
= Create new account, tab from username->pass->account list.  Next tab should go back to username
= Display 'New Account' in account list for accounts without a UID
= Interact with libgaim via a thread to avoid beachballing (Wait for Scott's patch - libgaim 0.76!, should fix)
= iTunes %_status script should display "Not Playing" when iTunes isn't open
= iTunes script runner should load scripts from the Application Support directory
= Make option-clicking a tab close button close all other tabs
= Make selecting an account in the menu connect / disconnect
= Make source list display all available emoticon packs
= Make the "Custom Tab Status Coloring" preferences work as intended (if disabled, the contact list labels colors are used for tab text colors).
= Move user name field out of account code and into account list preferences code
= Remember last X lines of previous conversation, restore to new message windows [Dave]
= Remove "per-contact" window position/size saving.  Use size/position of last window, cascade new ones 
= Remove sorting preferences.  Consolidate these and place them in the view menu - (Evan: MINOR CHANGE?! I'm hurt.)
= Remove submenus from accounts in the File menu
= Revamp emoticons preferences
= Tab scrubbing.  If control is held when mousing over a tab, select that tab
= We probably need a default priority preference.
= Webkit: Add keypress forwarding
= WebKit: Add support for displaying buddy icons using the UserIconPath status object

